webpackJsonp([3],{"09TC":function(e,t){},"AP+S":function(e,t){},Klkh:function(e,t){},"d8/S":function(e,t){},"i/JV":function(e,t,i){"use strict";var n=i("fZjL"),s=i.n(n),a={name:"cityPicker",props:{areaList:{type:Array,default:[]},value:{type:Boolean,default:!1},defaultData:{type:Array,default:function(){return[]}},level:{type:Number,default:2}},data:function(){return{selected:{province:{id:"",name:""},city:{id:"",name:""},area:{id:"",name:""}},Province:{},Citys:{},Areas:{},curTabs:1,wrapperHeight:{}}},computed:{visible:function(){return this.value?document.body.style.overflow="hidden":document.body.style.overflow="",this.value},level2:function(){return s()(this.Citys).length>0},level3:function(){return s()(this.Areas).length>0}},watch:{value:function(e){this.Province=this.formatData(this.areaList),e&&this.defaultData.length>0&&this.setDefaultData(this.defaultData)}},mounted:function(){},created:function(){},methods:{isMunicipality:function(e){return[1,2,3,4].indexOf(+e)>-1},formatData:function(e){var t={};return e.forEach(function(e){t[e.id]=e}),t},getCitys:function(e){return this.formatData(this.Province[e].areaList)},getAreas:function(e){return this.formatData(this.Citys[e].areaList)},close:function(){this.Citys={},this.Areas={},this.selected=this.$options.data().selected,this.curTabs=1,this.$emit("input",!1)},handleWrapper:function(e){"city-picker-container"===e.target.className&&this.close()},handleProvince:function(e){var t=e.id,i=e.name,n={},a=this.level;this.isMunicipality(t)&&2===this.level&&(a=1),this.selected.province.id!==t&&a>1&&(n=this.getCitys(t),this.Citys=n),this.selected.city.id="",this.selected.city.name="",this.selected.area.name="",this.selected.area.id="",this.Areas=[],this.selected.province.id=t,this.selected.province.name=i,s()(n).length>0?this.curTabs=2:this.finish()},handleCity:function(e){var t=e.id,i=e.name,n={};this.selected.city.id!==t&&this.level>2&&(n=this.getAreas(t),s()(n).length>0&&(this.Areas=n,this.selected.area.id="",this.selected.area.name="",this.curTabs=3)),this.selected.city.id=t,this.selected.city.name=i,0===s()(n).length&&this.finish()},handleArea:function(e){var t=e.id,i=e.name;this.selected.area.id=t,this.selected.area.name=i,this.finish()},handleTabs:function(e){this.curTabs=e},finish:function(){var e=this,t={};s()(this.selected).forEach(function(i){t[i]={},t[i].id=e.selected[i].id,t[i].name=e.selected[i].name}),this.close(),this.$emit("on-finish",t)},setDefaultData:function(e){var t=1,i=[];if(e.forEach(function(e){""!==e&&void 0!==e&&i.push(e.toString())}),0===i.length)return!1;if(this.selected.province={id:i[0],name:this.Province[i[0]].name},!this.isMunicipality(i[0])||2!==this.level){var n=this.getCitys(i[0]);if(s()(n).length>0){if(this.Citys=n,this.isMunicipality(i[0])&&!i[1])return void(this.curTabs=2);if(i[1]=i[1]||s()(n)[0],this.selected.city={id:i[1],name:n[i[1]].name},t=2,3===this.level){t=3;var a=this.getAreas(i[1]);s()(a).length>0&&(this.Areas=a,i[2]&&(this.selected.area={id:i[2],name:a[i[2]].name}))}}return console.log(t),this.curTabs=t,!0}this.curTabs=t},afterEnterAnimation:function(){this.wrapperHeight={height:"70%"}},beforeLeaveAnimation:function(){this.wrapperHeight={}}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"city-picker-transition"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],ref:"addressPopup",staticClass:"city-picker-container",on:{click:e.handleWrapper}},[i("transition",{attrs:{name:"citypicker-slide"},on:{"after-enter":e.afterEnterAnimation,"before-leave":e.beforeLeaveAnimation}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"wrapper",style:e.wrapperHeight},[i("div",{staticClass:"head"},[e._v("\n          所在地区\n          "),i("span",{staticClass:"close",on:{click:e.close}},[e._v("×")])]),e._v(" "),i("div",{staticClass:"con"},[i("div",{staticClass:"tab"},[i("span",{class:1===e.curTabs?"tabCur":"",on:{click:function(t){e.handleTabs(1)}}},[e._v("\n              "+e._s(e.selected.province.name||"请选择")+"\n            ")]),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.level2,expression:"level2"}],class:2===e.curTabs?"tabCur":"",on:{click:function(t){e.handleTabs(2)}}},[e._v("\n              "+e._s(e.selected.city.name||"请选择")+"\n            ")]),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.level3,expression:"level3"}],class:3===e.curTabs?"tabCur":"",on:{click:function(t){e.handleTabs(3)}}},[e._v("\n              "+e._s(e.selected.area.name||"请选择")+"\n            ")])]),e._v(" "),i("div",{staticClass:"tab-con"},[i("div",{directives:[{name:"show",rawName:"v-show",value:1===e.curTabs,expression:"curTabs === 1"}],staticClass:"province"},e._l(e.Province,function(t,n){return i("span",{key:t.id,class:t.id==e.selected.province.id?"selected":"",on:{click:function(i){e.handleProvince(t)}}},[e._v("\n              "+e._s(t.name)+"\n              ")])})),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===e.curTabs,expression:"curTabs === 2"}],staticClass:"city"},e._l(e.Citys,function(t,n){return i("span",{key:t.id,class:t.id==e.selected.city.id?"selected":"",on:{click:function(i){e.handleCity(t)}}},[e._v("\n              "+e._s(t.name)+"\n              ")])})),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3===e.curTabs,expression:"curTabs === 3"}],staticClass:"area"},e._l(e.Areas,function(t,n){return i("span",{key:t.id,class:t.id==e.selected.area.id?"selected":"",on:{click:function(i){e.handleArea(t)}}},[e._v("\n              "+e._s(t.name)+"\n              ")])}))])])])])],1)])},staticRenderFns:[]};var c=i("VU/8")(a,r,!1,function(e){i("Klkh"),i("09TC")},"data-v-283daeb6",null);t.a=c.exports},jb7J:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("7+uW"),s={components:{CityPicker:i("i/JV").a},data:function(){return{list:[],loading:!1,allLoaded:!1,wrapperHeight:0,popupVisible:!1,visible:!1,defaultData:[13e4,131100],selected:{}}},methods:{handleFinish:function(e){this.selected=e,this.defaultData=[e.province.code,e.city.code,e.area.code]},loadMore:function(){var e=this;this.loading=!0,setTimeout(function(){for(var t=e.list[e.list.length-1],i=1;i<=14;i++)e.list.push(t+i);e.loading=!1},2500)},onValuesChange:function(){}},mounted:function(){this.wrapperHeight=document.documentElement.clientHeight-this.$refs.wrapper.getBoundingClientRect().top;for(var e=1;e<=20;e++)this.list.push(e);this.$http.get("https://api.it120.cc/common/region/province").then(function(e){console.log(e)}).catch(console.log)}},a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-infinite"},[i("h1",{staticClass:"page-title"},[e._v("Infinite Scroll")]),e._v(" "),i("p",{staticClass:"desc",on:{click:function(t){e.popupVisible=!e.popupVisible}}},[e._v("北京市 >")]),e._v(" "),i("div",{ref:"wrapper",staticClass:"wrapper",style:{height:e.wrapperHeight+"px"}},[i("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],staticClass:"list",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"0"}},e._l(e.list,function(t){return i("li",{staticClass:"listitem"},[e._v(e._s(t))])})),e._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading"},[i("mt-spinner",{attrs:{type:"fading-circle"}}),e._v("\n      加载中...\n    ")],1)]),e._v(" "),i("button",{attrs:{type:"button",name:"button"},on:{click:function(t){e.visible=!e.visible}}},[e._v("show")]),e._v(" "),i("CityPicker",{attrs:{defaultData:e.defaultData},on:{"on-finish":e.handleFinish},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}}),e._v(" "),e._l(e.selected,function(t,n){return i("p",[e._v("\n      "+e._s(t.name)+" | "+e._s(t.code)+"\n    ")])})],2)},staticRenderFns:[]};var r=i("VU/8")(s,a,!1,function(e){i("AP+S")},null,null).exports,c=i("Au9i"),l=i.n(c),o=(i("d8/S"),i("xsZ7"),i("sVYa"),i("n5Qe"));n.default.prototype.$http=o.a,n.default.use(l.a),n.default.config.productionTip=!1,new n.default({el:"#app",components:{App:r},template:"<App/>"})},n5Qe:function(e,t,i){"use strict";var n=i("//Fk"),s=i.n(n),a=i("mtWM"),r=i.n(a),c=i("Au9i"),l=i.n(c);r.a.defaults.baseURL="http://m-eve.jd.com",r.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",r.a.defaults.withCredentials=!0,r.a.interceptors.request.use(function(e){return e},function(e){return s.a.reject(e)}),r.a.interceptors.response.use(function(e){var t=e.data;if(0!==t.state)return t;var i=location.href;window.location.href="https://plogin.m.jd.com/user/login.action?appid=461&returnurl="+encodeURIComponent(i)},function(e){return l.a.Toast("网络故障，请重试"),s.a.reject(e)}),t.a=r.a},xsZ7:function(e,t){}},["jb7J"]);